.ui.grid.full-height.left-right-padding
  .four.wide.column.full-height
    = render 'search_sidebar'
      
      
  .twelve.wide.column
    .ui.segment.marketplace
      
      = render 'filter_options'

      = render 'cards_list' if @search_params[:view_options] == "list" 
      = render 'cards_thumb' if @search_params[:view_options] == "thumb"
      = render 'cards_table' if @search_params[:view_options] == "text"
      = render 'cards_details' if @search_params[:view_options] == "details"
      
      
      .ui.two.column.centered.grid
        .digg_pagination
          = will_paginate @view_cards
        
        
          
:javascript
  $(document).ready(function(){
    $('.attributes > .checkbox, .players > .checkbox, .teams > .checkbox, .card-manufacturers > .checkbox, .seasons > .checkbox, .available-options > .checkbox').checkbox().checkbox({
      onChange: searchMarketplace
    });
    $("#price-search").click(searchMarketplace);
    $("#sort-options").change(searchMarketplace);
    $("#view-options").change(searchMarketplace);
    $("#per-page-options").change(searchMarketplace);
    $('.ui.dropdown').dropdown();
  });
  
  function searchMarketplace(){
    
    var card_attribute_ids = $.map($(".attributes > .checked"), function(check) { return $(check).attr("value") } );
    var card_player_ids = $.map($(".players > .checked"), function(check) { return $(check).attr("value") } );
    var card_team_ids = $.map($(".teams > .checked"), function(check) { return $(check).attr("value") } );
    var card_manufacturer_ids = $.map($(".card-manufacturers > .checked"), function(check) { return $(check).attr("value") } );
    var seasons = $.map($(".seasons > .checked"), function(check) { return $(check).attr("value") } );
    var available_options = $.map($(".available-options > .checked"), function(check) { return $(check).attr("value") } )[0];
    var price_min = $("#price-min").val();
    var price_max = $("#price-max").val();
    
    var sort_options = $("#sort-options").val();
    var view_options = $("#view-options").val();
    var per_page_options = $("#per-page-options").val();
    

    var params = jQuery.param( { search: { sort_options: sort_options, view_options: view_options, per_page_options: per_page_options, attribute_ids: card_attribute_ids, player_ids: card_player_ids, team_ids: card_team_ids, card_manufacturer_ids: card_manufacturer_ids, seasons: seasons, available_options: available_options, price_min: price_min, price_max: price_max } });
  
   
    window.location.href = "#{marketplace_search_path}" + "?" + params;
    
  }